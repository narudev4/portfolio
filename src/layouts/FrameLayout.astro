---
import HeaderNav from "../components/HeaderNav.astro";

const { title = "Naru Portfolio", description = "" } = Astro.props;
---

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    {description && <meta name="description" content={description} />}
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;500;600&family=Noto+Sans+JP:wght@400;500&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet" />
  </head>

  <body>
    <div class="app">
      <div class="frame">
        <header class="frame__header">
          <HeaderNav />
        </header>
        <div class="frame__scroll" id="frame-scroll">
          <main class="frame__main">
            <slot />
          </main>
        </div>
      </div>
    </div>
  </body>
</html>

<style>
  /* ===== Design System ===== */
  :root {
    /* Spacing */
    --space-xs: 8px;
    --space-sm: 16px;
    --space-md: 24px;
    --space-lg: 48px;
    --space-xl: 80px;
    --space-2xl: 120px;

    /* Layout */
    --content-max-width: 720px;
    --page-padding: 24px;
    --header-height: 45px;

    /* Colors */
    --color-text: #1a1a1a;
    --color-text-muted: #666666;
    --color-border: #e0e0e0;
    --color-bg: #ffffff;
    --color-accent: #629d2e;

    /* Typography */
    --font-heading: "Shippori Mincho", "Hiragino Mincho ProN", serif;
    --font-body: "Noto Sans JP", "Hiragino Sans", sans-serif;
    --font-label: "DM Sans", "Noto Sans JP", sans-serif;
  }

  @media (min-width: 768px) {
    :root {
      --page-padding: 40px;
      --space-xl: 100px;
      --space-2xl: 160px;
    }
  }

  :global(html, body) {
    height: 100%;
    margin: 0;
  }

  :global(body) {
    font-family: var(--font-body);
    font-size: 16px;
    line-height: 1.8;
    color: var(--color-text);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* body をスクロールさせない */
  body {
    overflow: hidden;
  }

  /* 画面中央に frame */
  .app {
    height: 100dvh;
    display: grid;
    place-items: center;
    padding: 24px;
    box-sizing: border-box;
  }

  .frame {
    width: 100%;
    height: 100%;
    border: 2px solid #629d2e;
    overflow: hidden;
    background: #ffffff;
    display: grid;
    grid-template-rows: auto 1fr;
  }

  /* header は frame 内固定（grid で固定） */
  .frame__header {
    border-bottom: 1px solid #e5e7eb;
    background: #fff;
    z-index: 1;
  }

  /* frame 内だけスクロール + scroll-snap */
  .frame__scroll {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    min-height: 0;
    scroll-snap-type: y mandatory;
  }

  .frame__main {
    box-sizing: border-box;
  }

  /* 各セクションを1画面サイズ + scroll-snap */
  .frame__main :global(section.snap) {
    height: calc(100dvh - 24px * 2 - 2px * 2 - var(--header-height, 45px));
    scroll-snap-align: start;
    padding: var(--page-padding);
    box-sizing: border-box;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .frame__main :global(section:not(.snap)) {
    padding: var(--page-padding);
    box-sizing: border-box;
  }

  /* ===== Global Typography ===== */
  :global(h1) {
    font-family: var(--font-heading);
    font-size: clamp(2.5rem, 6vw, 3.5rem);
    font-weight: 400;
    letter-spacing: 0.04em;
    line-height: 1.3;
    margin: 0;
  }

  :global(h2) {
    font-family: var(--font-heading);
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 400;
    letter-spacing: 0.03em;
    line-height: 1.3;
    margin: 0;
  }

  :global(h3) {
    font-family: var(--font-body);
    font-size: 1.125rem;
    font-weight: 500;
    letter-spacing: 0.02em;
    line-height: 1.5;
    margin: 0;
  }

  :global(p) {
    margin: 0;
  }

  :global(a) {
    color: var(--color-text);
    text-decoration-color: var(--color-border);
    text-underline-offset: 4px;
    transition: text-decoration-color 0.2s ease;
  }

  :global(a:hover) {
    text-decoration-color: var(--color-text);
  }

  /* ===== Content Container ===== */
  :global(.content-container) {
    max-width: var(--content-max-width);
    width: 100%;
  }
</style>